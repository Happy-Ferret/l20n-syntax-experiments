ws := [\s,]+
comment := ;.*

identifier := [a-zA-Z0-9-_=+<.>/?]+
keyword := :identifier
trait := ^identifier
argument := $identifier
accesskey := &[a-zA-Z0-9]

string :=
  "(expander | expander-escape | [^"] | quote-escape)"
  """(expander | expander-escape)"""
expander := {{ expression }}
quote-escape := \"
expander-escape := \{{

value := string accesskey? | map
map := {variant+}
variant := keyword value
index := [expression+]

expression := number | string | keyword | arg | identifier | form | accessor
form := (identifier expression*)
accessor := variant-accessor | trait-accessor
variant-accessor := identifier:identifier
trait-accessor := identifier^identifier

entity := <identifier body+>
body := comment | trait | index | value
